# docker-compose.yml
web:
  restart: always
  build: ./web
  expose:
    - "8000"
  # 3000 is the remote python debugging port
  ports:
    - "3000:3000"
  volumes:
    - ./web:/usr/src/app
  env_file: .env
  command: python -m flask run --host=0.0.0.0 --port 8000 --debugger

nginx:
  restart: always
  build: ./nginx/
  ports:
    - "8000:80"
  # TODO: mount the sites-enabled local directory
  volumes:
    - /www/static
  volumes_from:
    - web
  links:
    - web:web

postgres:
  restart: always
  image: postgres:latest
  ports:
    - "5432:5432"
